<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>基準点探索PWA</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- 検索に出さない -->
  <meta name="robots" content="noindex,nofollow">

  <!-- PWA（最低限） -->
  <link rel="manifest" href="manifest.json">
</head>

<body>

<h1 style="text-align:center;">基準点探索</h1>

<!-- =========================
     検索条件
========================= -->
<section style="text-align:center;">
  点名：
  <input id="searchName">

  都道府県：
  <select id="searchPref">
    <option value="">すべて</option>
    <option value="北海道">北海道</option>
    <option value="東京都">東京都</option>
    <option value="千葉県">千葉県</option>
    <!-- 必要に応じて追加 -->
  </select>
</section>

<section style="text-align:center; margin-top:8px;">
  <label><input type="checkbox" class="typeCheck" value="電子基準点">電子</label>
  <label><input type="checkbox" class="typeCheck" value="一等三角点">一等</label>
  <label><input type="checkbox" class="typeCheck" value="二等三角点">二等</label>
  <label><input type="checkbox" class="typeCheck" value="三等三角点">三等</label>
  <label><input type="checkbox" class="typeCheck" value="四等三角点">四等</label>

  <button onclick="searchPoints()">検索</button>
</section>

<!-- =========================
     検索結果
========================= -->
<table border="1" style="margin:12px auto; text-align:center;">
  <thead>
    <tr>
      <th>点種</th>
      <th>点名</th>
      <th>基準点コード</th>
      <th>都道府県</th>
      <th>詳細</th>
    </tr>
  </thead>
  <tbody id="resultBody"></tbody>
</table>

<div style="text-align:center;">
  <button onclick="prevPage()">＜ 前</button>
  <span id="pageInfo">0 / 0</span>
  <button onclick="nextPage()">次 ＞</button>
</div>

<!-- =========================
     JS 読み込み・起動処理
========================= -->
<script type="module">
  import { initPointsIfNeeded } from "./js/initPoints.js";
  import {
    searchPoints,
    nextPage,
    prevPage
  } from "./js/points.js";

  // 初回のみ points.json を投入
  initPointsIfNeeded();

  // onclick 用にグローバル公開
  window.searchPoints = searchPoints;
  window.nextPage = nextPage;
  window.prevPage = prevPage;

  // Step4で置き換える仮実装
  window.openDetail = code => {
    alert("基準点詳細へ: " + code);
  };
</script>

</body>
</html>
