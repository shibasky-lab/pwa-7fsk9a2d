<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- 検索除外 -->
  <meta name="robots" content="noindex, nofollow">

  <title>基準点探索PWA</title>

  <link rel="manifest" href="manifest.json">


  <script defer src="js/db.js"></script>
  <script defer src="js/points.js"></script>
  <script defer src="js/visits.js"></script>
  <script defer src="js/photos.js"></script>
</head>

<body>

<!-- ================= メニュー画面 ================= -->
<section id="menu-view" class="view">
  <h1>基準点探索</h1>

  <button onclick="showView('search-view')">基準点検索</button>
  <button disabled>探索履歴閲覧（準備中）</button>
  <button disabled>データ表示（準備中）</button>
</section>

<!-- ================= 基準点検索画面 ================= -->
<section id="search-view" class="view hidden">
<h2>基準点検索</h2>

<div id="search-area">
  <input type="text" id="search-name" placeholder="点名">

  <div id="type-filters">
    <label style="white-space:nowrap;">
      <input type="checkbox" value="電子基準点" checked> 電子
    </label>
    <label style="white-space:nowrap;">
      <input type="checkbox" value="一等三角点" checked> 一等
    </label>
    <label style="white-space:nowrap;">
      <input type="checkbox" value="二等三角点" checked> 二等
    </label>
    <label style="white-space:nowrap;">
      <input type="checkbox" value="三等三角点" checked> 三等
    </label>
    <label style="white-space:nowrap;">
      <input type="checkbox" value="四等三角点" checked> 四等
    </label>
  </div>

  <select id="search-pref">
    <option value="">都道府県（全て）</option>
  </select>

  <button id="search-btn">検索</button>
</div>

<table border="1" width="100%">
  <thead>
    <tr>
      <th>点種</th>
      <th>点名</th>
      <th>基準点コード</th>
      <th>都道府県</th>
      <th>詳細</th>
    </tr>
  </thead>
  <tbody id="result-body"></tbody>
</table>

<div id="pager">
  <button id="prev-page">前へ</button>
  <span id="page-info"></span>
  <button id="next-page">次へ</button>
</div>

<script src="js/db.js"></script>
<script src="js/points.js"></script>

  
<script>
(async () => {
  const db = await openDB();
  const tx = db.transaction("points", "readonly");
  const store = tx.objectStore("points");

  let count = 0;
  store.openCursor().onsuccess = e => {
    const cursor = e.target.result;
    if (cursor) {
      count++;
      cursor.continue();
    } else {
      console.log("基準点件数:", count);
      alert(`基準点 ${count} 件`);
    }
  };
})();
</script>



  
<!-- ================= 詳細画面 ================= -->
<section id="detail-view" class="view hidden">
  <h2>基準点詳細</h2>

  <p>※ 詳細情報は後で実装</p>

  <button onclick="showView('search-view')">戻る</button>
</section>

<!-- ================= 探索履歴入力画面 ================= -->
<section id="visit-form-view" class="view hidden">
  <h2>探索履歴入力</h2>

  <p>※ 履歴入力フォームは後で実装</p>

  <button onclick="showView('detail-view')">戻る</button>
</section>

<script>
  function showView(viewId) {
    document.querySelectorAll('.view').forEach(v => {
      v.classList.add('hidden');
    });
    document.getElementById(viewId).classList.remove('hidden');
  }
</script>

</body>
</html>







